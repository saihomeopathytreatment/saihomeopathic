<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sai Homoeopathic Treatment - Natural Healing Solutions</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            line-height: 1.6;
            color: #333;
            background-color: #f9f9f9;
            overflow-x: hidden;
        }
        
        /* Header & Navigation */
        header {
            background-color: #2a7a5c;
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2.5rem;
            color: #c5e1d4;
        }
        
        .logo-text h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }
        
        .logo-text p {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            font-size: 1.1rem;
            padding: 8px 12px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        nav a:hover, nav a.active {
            background-color: rgba(255, 255, 255, 0.15);
        }
        
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(42, 122, 92, 0.9), rgba(42, 122, 92, 0.8)), url('https://images.unsplash.com/photo-1559757148-5c350d0d3c56?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            text-align: center;
            padding: 5rem 1rem;
        }
        
        .hero h2 {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 2rem;
            opacity: 0.95;
        }
        
        .rating {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 2rem;
        }
        
        .stars {
            color: #FFD700;
            font-size: 1.5rem;
        }
        
        .review-count {
            font-size: 1.1rem;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
        }
        
        /* Main Content Sections */
        section {
            padding: 5rem 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 3rem;
            color: #2a7a5c;
            position: relative;
        }
        
        .section-title h2 {
            font-size: 2.5rem;
            display: inline-block;
            padding-bottom: 10px;
        }
        
        .section-title h2:after {
            content: '';
            position: absolute;
            width: 80px;
            height: 4px;
            background-color: #2a7a5c;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 2px;
        }
        
        /* Contact Section */
        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            margin-top: 2rem;
        }
        
        .contact-info {
            background-color: white;
            padding: 2.5rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .contact-info h3 {
            color: #2a7a5c;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }
        
        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            margin-bottom: 1.5rem;
        }
        
        .contact-item i {
            color: #2a7a5c;
            font-size: 1.5rem;
            width: 30px;
            margin-top: 5px;
        }
        
        .contact-details h4 {
            margin-bottom: 5px;
            color: #333;
        }
        
        .phone-number {
            font-size: 1.8rem;
            color: #2a7a5c;
            font-weight: 700;
            margin: 10px 0;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
        }
        
        .phone-number:hover {
            color: #1f5c46;
            transform: translateY(-2px);
        }
        
        .hours-list {
            list-style: none;
            margin-top: 1rem;
        }
        
        .hours-list li {
            padding: 8px 0;
            border-bottom: 1px dashed #eee;
            display: flex;
            justify-content: space-between;
        }
        
        .hours-list li:last-child {
            border-bottom: none;
        }
        
        /* Contact Form */
        .contact-form {
            background-color: white;
            padding: 2.5rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
            position: relative;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: #2a7a5c;
            outline: none;
        }
        
        .submit-btn {
            background-color: #2a7a5c;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            width: 100%;
        }
        
        .submit-btn:hover {
            background-color: #1f5c46;
        }
        
        /* Quick Contact Section */
        .quick-contact-desktop {
            display: none;
        }
        
        /* Location Section */
        .location-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            margin-top: 3rem;
        }
        
        .location-info {
            background-color: white;
            padding: 2.5rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .location-info h3 {
            color: #2a7a5c;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }
        
        .address {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }
        
        .address i {
            color: #2a7a5c;
            margin-right: 10px;
            width: 20px;
        }
        
        .map-container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .map-container iframe {
            border: none;
            border-radius: 8px;
            margin-bottom: 15px;
            min-height: 300px;
            width: 100%;
        }
        
        .map-actions {
            text-align: center;
        }
        
        .directions-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background-color: #2a7a5c;
            color: white;
            text-decoration: none;
            padding: 12px 25px;
            border-radius: 5px;
            font-weight: 500;
            transition: background-color 0.3s;
        }
        
        .directions-btn:hover {
            background-color: #1f5c46;
        }
        
        /* Testimonials Section */
        .testimonials-container {
            max-width: 1000px;
            margin: 3rem auto 0;
        }
        
        .testimonial {
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
            position: relative;
        }
        
        .testimonial:before {
            content: "\201C";
            font-size: 5rem;
            color: #e9f5f0;
            position: absolute;
            top: -20px;
            left: 10px;
            font-family: serif;
        }
        
        .testimonial-content {
            font-style: italic;
            margin-bottom: 1.5rem;
            line-height: 1.7;
            position: relative;
            z-index: 1;
        }
        
        .testimonial-author {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .author-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #e9f5f0;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8rem;
            color: #2a7a5c;
        }
        
        .author-info h4 {
            color: #2a7a5c;
            margin-bottom: 5px;
        }
        
        .author-info .stars {
            font-size: 1rem;
        }
        
        /* Email and Phone Link Styling */
        .email-link {
            color: #2a7a5c;
            font-weight: 600;
            text-decoration: none;
            font-size: 1.1rem;
            display: inline-block;
            margin: 5px 0;
            transition: all 0.3s ease;
            word-break: break-word;
        }
        
        .email-link:hover {
            color: #1f5c46;
            text-decoration: underline;
            transform: translateY(-1px);
        }
        
        /* Mobile Quick Contact */
        .mobile-contact-buttons {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 999;
            flex-direction: column;
            gap: 10px;
        }
        
        .mobile-call-btn, .mobile-email-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 0.8rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .mobile-call-btn {
            background-color: #2a7a5c;
        }
        
        .mobile-email-btn {
            background-color: #e74c3c;
        }
        
        .mobile-call-btn:hover, .mobile-email-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            color: white;
        }
        
        .mobile-call-btn i, .mobile-email-btn i {
            font-size: 1.2rem;
            margin-bottom: 3px;
        }
        
        /* About Section */
        .about-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            margin-top: 3rem;
        }
        
        .about-content {
            background-color: white;
            padding: 2.5rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .about-content h3 {
            color: #2a7a5c;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }
        
        .about-content p {
            margin-bottom: 1.5rem;
            line-height: 1.7;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .feature-item {
            text-align: center;
            padding: 1.5rem;
            background-color: #f0f7f4;
            border-radius: 8px;
            transition: transform 0.3s ease;
        }
        
        .feature-item:hover {
            transform: translateY(-5px);
        }
        
        .feature-item i {
            font-size: 2rem;
            color: #2a7a5c;
            margin-bottom: 1rem;
        }
        
        /* Footer */
        footer {
            background-color: #1a1a1a;
            color: #ddd;
            padding: 3rem 0 1.5rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .footer-column h3 {
            color: white;
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            position: relative;
            padding-bottom: 10px;
        }
        
        .footer-column h3:after {
            content: '';
            position: absolute;
            width: 40px;
            height: 3px;
            background-color: #2a7a5c;
            bottom: 0;
            left: 0;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #aaa;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: #2a7a5c;
        }
        
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 1.5rem;
        }
        
        .social-icons a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: #333;
            color: white;
            border-radius: 50%;
            text-decoration: none;
            transition: background-color 0.3s;
        }
        
        .social-icons a:hover {
            background-color: #2a7a5c;
        }
        
        .copyright {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid #333;
            color: #aaa;
            font-size: 0.9rem;
        }
        
        /* ============================================= */
        /* TYPEAHEAD/AUTOCOMPLETE STYLES */
        /* ============================================= */
        .typeahead-container {
            position: relative;
            width: 100%;
        }
        
        .typeahead-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 5px 5px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: none;
        }
        
        .typeahead-list.active {
            display: block;
        }
        
        .typeahead-item {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            transition: background-color 0.2s;
        }
        
        .typeahead-item:hover {
            background-color: #f0f7f4;
        }
        
        .typeahead-item:last-child {
            border-bottom: none;
        }
        
        .typeahead-item .patient-name {
            font-weight: 600;
            color: #2a7a5c;
        }
        
        .typeahead-item .patient-info {
            font-size: 0.85rem;
            color: #666;
            margin-top: 3px;
        }
        
        .typeahead-item .patient-phone {
            color: #555;
        }
        
        .typeahead-item .patient-disease {
            font-style: italic;
        }
        
        .autocomplete-highlight {
            background-color: #fff9c4;
            padding: 1px 2px;
            border-radius: 2px;
        }
        
        .patient-history-badge {
            background-color: #e8f5e9;
            color: #388e3c;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.75rem;
            margin-left: 8px;
        }
        
        /* ============================================= */
        /* ENHANCED ADMIN SECTION STYLES */
        /* ============================================= */
        
        .admin-section {
            display: none;
            min-height: 100vh;
            background-color: #f5f5f5;
        }
        
        .admin-header {
            background-color: #1f5c46;
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .admin-header .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-main {
            padding: 2rem 0;
        }
        
        .admin-login {
            max-width: 400px;
            margin: 5rem auto;
            padding: 2.5rem;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }
        
        .admin-login h2 {
            color: #2a7a5c;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        /* Admin Dashboard Layout */
        .admin-dashboard {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 2rem;
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }
        
        .dashboard-header h2 {
            color: #2a7a5c;
        }
        
        .admin-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 2rem;
            border-bottom: 1px solid #eee;
            padding-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .admin-nav-btn {
            background: none;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 1rem;
            color: #666;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        .admin-nav-btn:hover {
            background-color: #f0f7f4;
            color: #2a7a5c;
        }
        
        .admin-nav-btn.active {
            background-color: #2a7a5c;
            color: white;
        }
        
        /* Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .dashboard-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-left: 4px solid #2a7a5c;
        }
        
        .dashboard-card h3 {
            color: #555;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
        }
        
        .dashboard-card .value {
            font-size: 2rem;
            font-weight: 700;
            color: #2a7a5c;
            margin-bottom: 0.5rem;
        }
        
        .dashboard-card .change {
            font-size: 0.9rem;
        }
        
        .change.positive {
            color: #4caf50;
        }
        
        .change.negative {
            color: #f44336;
        }
        
        /* Charts Container */
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .chart-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }
        
        .chart-card h3 {
            color: #555;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        
        .chart-container {
            height: 250px;
            position: relative;
        }
        
        /* Patient Form Styles */
        .patient-form-container {
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .form-group-full {
            margin-bottom: 1.5rem;
        }
        
        .form-group-full label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-group-full textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            min-height: 100px;
            resize: vertical;
        }
        
        .form-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .submit-patient-btn {
            background-color: #2a7a5c;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .reset-btn {
            background-color: #f5f5f5;
            color: #666;
            border: 1px solid #ddd;
            padding: 12px 30px;
            font-size: 1.1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .submit-patient-btn:hover {
            background-color: #1f5c46;
        }
        
        .reset-btn:hover {
            background-color: #eee;
        }
        
        /* Patient List Table */
        .patient-list-container {
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .table-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .search-box {
            display: flex;
            align-items: center;
            gap: 10px;
            background-color: #f9f9f9;
            padding: 10px 15px;
            border-radius: 5px;
            border: 1px solid #ddd;
            min-width: 300px;
        }
        
        .search-box input {
            border: none;
            background: none;
            outline: none;
            width: 100%;
        }
        
        .filters {
            display: flex;
            gap: 10px;
        }
        
        .filter-select {
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: white;
        }
        
        .patient-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        .patient-table th {
            background-color: #2a7a5c;
            color: white;
            text-align: left;
            padding: 12px 15px;
            font-weight: 600;
        }
        
        .patient-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        .patient-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .patient-table tr:hover {
            background-color: #f0f7f4;
        }
        
        .patient-type {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .type-new {
            background-color: #e3f2fd;
            color: #1976d2;
        }
        
        .type-regular {
            background-color: #e8f5e9;
            color: #388e3c;
        }
        
        .patient-actions {
            display: flex;
            gap: 10px;
        }
        
        .action-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .view-btn {
            background-color: #2196f3;
            color: white;
        }
        
        .edit-btn {
            background-color: #ff9800;
            color: white;
        }
        
        .delete-btn {
            background-color: #f44336;
            color: white;
        }
        
        .no-patients {
            text-align: center;
            padding: 3rem;
            color: #777;
        }
        
        /* Modal Styles */
        .patient-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            width: 90%;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }
        
        .modal-header h3 {
            color: #2a7a5c;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
        }
        
        .modal-details {
            margin-top: 1.5rem;
        }
        
        .detail-section {
            margin-bottom: 1.5rem;
        }
        
        .detail-section h4 {
            color: #2a7a5c;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .detail-item {
            margin-bottom: 0.5rem;
        }
        
        .detail-label {
            font-weight: 600;
            color: #555;
            font-size: 0.9rem;
        }
        
        .detail-value {
            color: #333;
            margin-top: 2px;
        }
        
        /* Message Badge */
        .message-badge {
            background-color: #f44336;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            margin-left: 5px;
        }
        
        /* Responsive Design */
        @media (max-width: 992px) {
            .hero h2 {
                font-size: 2.5rem;
            }
            
            .section-title h2 {
                font-size: 2rem;
            }
            
            .contact-grid,
            .location-container,
            .about-container {
                grid-template-columns: 1fr;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .charts-container {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            nav ul {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background-color: #2a7a5c;
                flex-direction: column;
                padding: 1rem 0;
                box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
            }
            
            nav ul.active {
                display: flex;
            }
            
            nav ul li {
                width: 100%;
                text-align: center;
            }
            
            nav a {
                display: block;
                padding: 15px;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .phone-number {
                font-size: 1.5rem;
            }
            
            section {
                padding: 3rem 0;
            }
            
            /* Show mobile contact buttons on mobile */
            .mobile-contact-buttons {
                display: flex;
            }
            
            /* Show quick contact on mobile */
            .quick-contact-desktop {
                display: block;
                margin-top: 2rem;
                background-color: white;
                padding: 2rem;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
                text-align: center;
            }
            
            .quick-contact-desktop h3 {
                color: #2a7a5c;
                margin-bottom: 1.5rem;
                font-size: 1.8rem;
            }
            
            .quick-contact-buttons {
                display: flex;
                justify-content: center;
                gap: 20px;
                margin-top: 1rem;
                flex-direction: column;
                align-items: center;
            }
            
            .quick-contact-btn {
                display: inline-flex;
                align-items: center;
                gap: 10px;
                padding: 12px 25px;
                border-radius: 5px;
                font-weight: 500;
                transition: all 0.3s ease;
                text-decoration: none;
            }
            
            .call-btn {
                background-color: #2a7a5c;
                color: white;
            }
            
            .email-btn {
                background-color: #e74c3c;
                color: white;
            }
            
            .quick-contact-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            }
            
            /* Adjust contact form and info padding */
            .contact-info, .contact-form, .location-info, .about-content {
                padding: 1.5rem;
            }
            
            .logo-text h1 {
                font-size: 1.5rem;
            }
            
            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .admin-nav {
                justify-content: center;
            }
            
            .admin-nav-btn {
                flex: 1;
                min-width: 140px;
                text-align: center;
            }
            
            .dashboard-cards {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .chart-card {
                padding: 1rem;
            }
            
            .chart-container {
                height: 200px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .table-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                min-width: 100%;
            }
            
            .filters {
                flex-wrap: wrap;
            }
            
            .patient-table {
                display: block;
                overflow-x: auto;
            }
            
            .modal-content {
                padding: 1.5rem;
            }
            
            .detail-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 576px) {
            .hero {
                padding: 3rem 1rem;
            }
            
            .hero h2 {
                font-size: 1.8rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .map-container iframe {
                height: 250px;
            }
            
            .admin-login {
                padding: 1.5rem;
                margin: 2rem auto;
            }
            
            .admin-dashboard {
                padding: 1rem;
            }
            
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            
            .patient-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Main Website Content -->
    <div id="websiteContent">
        <!-- Header & Navigation -->
        <header>
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <i class="fas fa-stethoscope"></i>
                        <div class="logo-text">
                            <h1>Sai Homoeopathic Treatment</h1>
                            <p>Natural Healing Solutions</p>
                        </div>
                    </div>
                    
                    <button class="mobile-menu-btn" id="mobileMenuBtn">
                        <i class="fas fa-bars"></i>
                    </button>
                    
                    <nav>
                        <ul id="mainNav">
                            <li><a href="#home" class="active">Home</a></li>
                            <li><a href="#about">About</a></li>
                            <li><a href="#contact">Contact</a></li>
                            <li><a href="#location">Location</a></li>
                            <li><a href="#testimonials">Testimonials</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>

        <!-- Hero Section -->
        <section class="hero" id="home">
            <div class="container">
                <h2>Holistic Healing with Sai Homoeopathic Treatment</h2>
                <p>With over 5,016 reviews and a legacy of trust, we provide natural, side-effect-free homeopathic treatments for chronic and acute conditions. Experience personalized care and holistic healing at our Paprola clinic.</p>
                
                <div class="rating">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <div class="review-count">5,016 Reviews</div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about">
            <div class="container">
                <div class="section-title">
                    <h2>About Us</h2>
                </div>
                
                <div class="about-container">
                    <div class="about-content">
                        <h3>Our Philosophy</h3>
                        <p>At Sai Homoeopathic Treatment, we believe in treating the individual as a whole, not just the symptoms. Our approach combines traditional homeopathic principles with modern understanding of holistic health.</p>
                        <p>With years of experience and thousands of satisfied patients, we've established ourselves as a trusted name in homeopathic care in the Paprola region and beyond.</p>
                        
                        <div class="features-grid">
                            <div class="feature-item">
                                <i class="fas fa-heartbeat"></i>
                                <h4>Holistic Approach</h4>
                                <p>Treating mind, body, and spirit as one</p>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-user-md"></i>
                                <h4>Expert Care</h4>
                                <p>Experienced homeopathic practitioners</p>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-leaf"></i>
                                <h4>Natural Remedies</h4>
                                <p>100% natural, side-effect-free treatments</p>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-calendar-check"></i>
                                <h4>Personalized Plans</h4>
                                <p>Customized treatment for each patient</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="about-content">
                        <h3>Our Services</h3>
                        <p>We specialize in treating a wide range of conditions using classical homeopathy:</p>
                        <ul style="list-style: none; margin-left: 1rem;">
                            <li style="margin-bottom: 10px;"><i class="fas fa-check-circle" style="color: #2a7a5c; margin-right: 10px;"></i> Chronic diseases (arthritis, diabetes, hypertension)</li>
                            <li style="margin-bottom: 10px;"><i class="fas fa-check-circle" style="color: #2a7a5c; margin-right: 10px;"></i> Respiratory disorders (asthma, allergies, sinusitis)</li>
                            <li style="margin-bottom: 10px;"><i class="fas fa-check-circle" style="color: #2a7a5c; margin-right: 10px;"></i> Skin conditions (eczema, psoriasis, acne)</li>
                            <li style="margin-bottom: 10px;"><i class="fas fa-check-circle" style="color: #2a7a5c; margin-right: 10px;"></i> Digestive disorders</li>
                            <li style="margin-bottom: 10px;"><i class="fas fa-check-circle" style="color: #2a7a5c; margin-right: 10px;"></i> Women's health issues</li>
                            <li style="margin-bottom: 10px;"><i class="fas fa-check-circle" style="color: #2a7a5c; margin-right: 10px;"></i> Pediatric care</li>
                            <li style="margin-bottom: 10px;"><i class="fas fa-check-circle" style="color: #2a7a5c; margin-right: 10px;"></i> Mental health and stress management</li>
                        </ul>
                        <p>We also provide teleconsultation services for patients who cannot visit our clinic in person.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact">
            <div class="container">
                <div class="section-title">
                    <h2>Contact Us</h2>
                </div>
                
                <div class="contact-grid">
                    <div class="contact-info">
                        <h3>Get in Touch</h3>
                        <p>Reach out to us for appointments, consultations, or any queries about homeopathic treatments.</p>
                        
                        <div class="contact-item">
                            <i class="fas fa-phone-alt"></i>
                            <div class="contact-details">
                                <h4>Phone Number</h4>
                                <a href="tel:+917005602518" class="phone-number">+91 7005602518</a>
                                <p>Call us for appointments or teleconsultation</p>
                            </div>
                        </div>
                        
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <div class="contact-details">
                                <h4>Email Address</h4>
                                <a href="mailto:saihomeopathytreatment@gmail.com" class="email-link">saihomeopathytreatment@gmail.com</a>
                                <p>We typically respond within 24 hours</p>
                            </div>
                        </div>
                        
                        <div class="contact-item">
                            <i class="fas fa-clock"></i>
                            <div class="contact-details">
                                <h4>Opening Hours</h4>
                                <ul class="hours-list">
                                    <li><span>Monday</span> <span>Closed</span></li>
                                    <li><span>Tuesday</span> <span>9:00 AM - 8:00 PM</span></li>
                                    <li><span>Wednesday</span> <span>9:00 AM - 8:00 PM</span></li>
                                    <li><span>Thursday</span> <span>9:00 AM - 8:00 PM</span></li>
                                    <li><span>Friday</span> <span>9:00 AM - 8:00 PM</span></li>
                                    <li><span>Saturday</span> <span>9:00 AM - 8:00 PM</span></li>
                                    <li><span>Sunday</span> <span>9:00 AM - 8:00 PM</span></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="contact-form">
                        <h3>Send a Message</h3>
                        <form id="contactForm">
                            <div class="form-group">
                                <label for="name">Full Name</label>
                                <input type="text" id="name" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="phone">Phone Number</label>
                                <input type="tel" id="phone" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="email">Email Address</label>
                                <input type="email" id="email">
                            </div>
                            
                            <div class="form-group">
                                <label for="appointment">Appointment For</label>
                                <select id="appointment">
                                    <option value="">Select an option</option>
                                    <option value="consultation">New Consultation</option>
                                    <option value="followup">Follow-up Visit</option>
                                    <option value="teleconsultation">Teleconsultation</option>
                                    <option value="medicine">Medicine Query</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="message">Message</label>
                                <textarea id="message" rows="5"></textarea>
                            </div>
                            
                            <button type="submit" class="submit-btn">Send Message</button>
                        </form>
                    </div>
                </div>
                
                <!-- Quick Contact Section (Hidden on desktop, shown only on mobile) -->
                <div class="quick-contact-desktop">
                    <h3>Quick Contact Options</h3>
                    <p>For immediate assistance, use one of these quick contact methods:</p>
                    <div class="quick-contact-buttons">
                        <a href="tel:+917005602518" class="quick-contact-btn call-btn">
                            <i class="fas fa-phone-alt"></i> Call Now
                        </a>
                        <a href="mailto:saihomeopathytreatment@gmail.com?subject=Appointment%20Request&body=Hello,%20I%20would%20like%20to%20schedule%20an%20appointment." class="quick-contact-btn email-btn">
                            <i class="fas fa-envelope"></i> Email Now
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Location Section -->
        <section id="location">
            <div class="container">
                <div class="section-title">
                    <h2>Our Location</h2>
                </div>
                
                <div class="location-container">
                    <div class="location-info">
                        <h3>Visit Our Clinic</h3>
                        <p>We are conveniently located in Paprola, Himachal Pradesh, easily accessible from surrounding areas.</p>
                        
                        <div class="address">
                            <p><i class="fas fa-map-marker-alt"></i> <strong>Address:</strong> Sai Homoeopathic Treatment (Clinic), Khoo Bazar, Opposite Saraswati Vidya Mandir Paprola, Kasba Paprola, Himachal Pradesh 176115, India</p>
                        </div>
                        
                        <div class="contact-item">
                            <i class="fas fa-directions"></i>
                            <div class="contact-details">
                                <h4>Directions</h4>
                                <p>Located on Khoo Bazar, opposite Saraswati Vidya Mandir, near the main market area of Paprola. Ample parking available.</p>
                            </div>
                        </div>
                        
                        <div class="contact-item">
                            <i class="fas fa-bus"></i>
                            <div class="contact-details">
                                <h4>Transport</h4>
                                <p>Well-connected by road. Local transport available from nearby towns and bus stand.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="map-container">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3372.215593821545!2d76.57909277601142!3d32.30443241048771!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x390d2a1773d12715%3A0x357aeb1579ea6d88!2sSai%20Homeopathic%20Treatment%20Clinic!5e0!3m2!1sen!2sin!4v1713945600000!5m2!1sen!2sin" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                        <div class="map-actions">
                            <a href="https://maps.app.goo.gl/WcPV7SgwBZngHRFS9" target="_blank" class="directions-btn">
                                <i class="fas fa-directions"></i> Get Directions
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials">
            <div class="container">
                <div class="section-title">
                    <h2>Patient Testimonials</h2>
                </div>
                
                <div class="testimonials-container">
                    <div class="testimonial">
                        <div class="testimonial-content">
                            <p>I had been suffering from chronic sinusitis for years. After visiting Sai Homoeopathic Treatment, I experienced significant improvement within just 2 months. The personalized approach and genuine care from the doctor made all the difference.</p>
                        </div>
                        <div class="testimonial-author">
                            <div class="author-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="author-info">
                                <h4>Rajesh Kumar</h4>
                                <div class="stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                                <p>Patient since 2019</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="testimonial">
                        <div class="testimonial-content">
                            <p>My daughter's persistent allergies were not responding to conventional medicine. A friend recommended Sai Homoeopathic Treatment, and I'm so grateful. The treatment was gentle yet effective, and she's now allergy-free for the first time in years.</p>
                        </div>
                        <div class="testimonial-author">
                            <div class="author-avatar">
                                <i class="fas fa-user-female"></i>
                            </div>
                            <div class="author-info">
                                <h4>Priya Sharma</h4>
                                <div class="stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                </div>
                                <p>Patient since 2021</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="testimonial">
                        <div class="testimonial-content">
                            <p>After trying multiple treatments for my arthritis with little success, I decided to try homeopathy. The doctor at Sai Homoeopathic took time to understand my complete medical history. The treatment has reduced my pain significantly and improved my mobility.</p>
                        </div>
                        <div class="testimonial-author">
                            <div class="author-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="author-info">
                                <h4>Harish Patel</h4>
                                <div class="stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                                <p>Patient since 2018</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Mobile Quick Contact Buttons (Only visible on mobile) -->
        <div class="mobile-contact-buttons">
            <a href="tel:+917005602518" class="mobile-call-btn">
                <i class="fas fa-phone-alt"></i>
                <span>Call</span>
            </a>
            <a href="mailto:saihomeopathytreatment@gmail.com" class="mobile-email-btn">
                <i class="fas fa-envelope"></i>
                <span>Email</span>
            </a>
        </div>

        <!-- Footer -->
        <footer>
            <div class="container">
                <div class="footer-content">
                    <div class="footer-column">
                        <h3>Sai Homoeopathic Treatment</h3>
                        <p>Providing natural, holistic homeopathic treatments with a legacy of trust and over 5,016 positive reviews from satisfied patients.</p>
                        <div class="social-icons">
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-instagram"></i></a>
                            <a href="#"><i class="fab fa-youtube"></i></a>
                        </div>
                    </div>
                    
                    <div class="footer-column">
                        <h3>Quick Links</h3>
                        <ul class="footer-links">
                            <li><a href="#home">Home</a></li>
                            <li><a href="#about">About Us</a></li>
                            <li><a href="#contact">Contact</a></li>
                            <li><a href="#location">Location</a></li>
                            <li><a href="#testimonials">Testimonials</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h3>Contact Info</h3>
                        <ul class="footer-links">
                            <li><i class="fas fa-map-marker-alt"></i> Khoo Bazar, Opposite Saraswati Vidya Mandir, Paprola, HP 176115</li>
                            <li>
                                <a href="tel:+917005602518">
                                    <i class="fas fa-phone-alt"></i> +91 7005602518
                                </a>
                            </li>
                            <li>
                                <a href="mailto:saihomeopathytreatment@gmail.com">
                                    <i class="fas fa-envelope"></i> saihomeopathytreatment@gmail.com
                                </a>
                            </li>
                            <li><i class="fas fa-clock"></i> Tue-Sun: 9:00 AM - 8:00 PM</li>
                        </ul>
                    </div>
                </div>
                
                <div class="copyright">
                    <p>&copy; 2025 Sai Homoeopathic Treatment. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Admin Section (Initially Hidden) -->
    <div id="adminSection" class="admin-section">
        <!-- Admin Login Page -->
        <div id="adminLoginPage" class="admin-login-container">
            <div class="admin-header">
                <div class="container">
                    <div class="header-content">
                        <div class="logo">
                            <i class="fas fa-user-shield"></i>
                            <div class="logo-text">
                                <h1>Sai Homoeopathic Admin</h1>
                                <p>Patient Management Portal</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="admin-main">
                <div class="container">
                    <div class="admin-login">
                        <h2>Admin Login</h2>
                        <form id="adminLoginForm">
                            <div class="form-group">
                                <label for="adminUsername">Username</label>
                                <input type="text" id="adminUsername" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="adminPassword">Password</label>
                                <input type="password" id="adminPassword" required>
                            </div>
                            
                            <button type="submit" class="submit-btn">Login</button>

                            <p style="margin-top: 1rem; text-align: center; font-size: 0.8rem; color: #888;">
                                <a href="#" onclick="goToHomepage()" style="color: #2a7a5c;"> Back to main website</a>
                            </p>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Admin Dashboard -->
        <div id="adminDashboard" style="display: none;">
            <div class="admin-header">
                <div class="container">
                    <div class="header-content">
                        <div class="logo">
                            <i class="fas fa-user-shield"></i>
                            <div class="logo-text">
                                <h1>Sai Homoeopathic Admin</h1>
                                <p>Patient Management Portal</p>
                            </div>
                        </div>
                        <button id="logoutBtn" class="logout-btn">Logout</button>
                    </div>
                </div>
            </div>
            
            <div class="admin-main">
                <div class="container">
                    <div class="admin-dashboard">
                        <div class="dashboard-header">
                            <h2>Patient Management Dashboard</h2>
                            <div>
                                <span id="patientCount">0 patients</span>
                            </div>
                        </div>
                        
                        <!-- Admin Navigation -->
                        <div class="admin-nav">
                            <button class="admin-nav-btn active" onclick="showDashboard()">
                                <i class="fas fa-chart-line"></i> Dashboard
                            </button>
                            <button class="admin-nav-btn" onclick="showPatientForm()">
                                <i class="fas fa-user-plus"></i> Add Patient
                            </button>
                            <button class="admin-nav-btn" onclick="showPatientList()">
                                <i class="fas fa-users"></i> Patient List
                            </button>
                            <button class="admin-nav-btn" onclick="showMessages()">
                                <i class="fas fa-envelope"></i> Messages
                                <span id="messageBadge" class="message-badge" style="display: none;"></span>
                            </button>
                        </div>
                        
                        <!-- Dashboard Content -->
                        <div id="dashboardContent">
                            <!-- Dashboard Cards -->
                            <div class="dashboard-cards">
                                <div class="dashboard-card">
                                    <h3>New Patients This Month</h3>
                                    <div class="value" id="newPatientsMonth">0</div>
                                    <div class="change" id="newPatientsChange">
                                        <span id="newPatientsChangeValue">0%</span> from last month
                                    </div>
                                </div>
                                
                                <div class="dashboard-card">
                                    <h3>Total Patients</h3>
                                    <div class="value" id="totalPatients">0</div>
                                    <div class="change">
                                        <span id="totalPatientsChange">0</span> growth this month
                                    </div>
                                </div>
                                
                                <div class="dashboard-card">
                                    <h3>Monthly Revenue</h3>
                                    <div class="value" id="monthlyRevenue">0</div>
                                    <div class="change" id="revenueChange">
                                        <span id="revenueChangeValue">0%</span> from last month
                                    </div>
                                </div>
                                
                                <div class="dashboard-card">
                                    <h3>Patient Retention</h3>
                                    <div class="value" id="retentionRate">0%</div>
                                    <div class="change">
                                        <span id="retentionChange">0%</span> change
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Charts -->
                            <div class="charts-container">
                                <div class="chart-card">
                                    <h3>Patient Growth Trend</h3>
                                    <div class="chart-container">
                                        <canvas id="patientGrowthChart"></canvas>
                                    </div>
                                </div>
                                
                                <div class="chart-card">
                                    <h3>Disease Distribution</h3>
                                    <div class="chart-container">
                                        <canvas id="diseaseChart"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Recent Patients -->
                            <div class="chart-card">
                                <h3>Recent Patients</h3>
                                <div id="recentPatientsList">
                                    <!-- Recent patients will be loaded here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Patient Form Content -->
                        <div id="patientFormContent" style="display: none;">
                            <div class="patient-form-container">
                                <h2>Add New Patient</h2>
                                <form id="patientForm">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="patientType">Patient Type*</label>
                                            <select id="patientType" required onchange="handlePatientTypeChange()">
                                                <option value="">Select Type</option>
                                                <option value="new">New Patient</option>
                                                <option value="regular">Regular Patient</option>
                                            </select>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="registrationDate">Registration Date*</label>
                                            <input type="date" id="registrationDate" required>
                                        </div>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group typeahead-container">
                                            <label for="patientName">Full Name*</label>
                                            <input type="text" id="patientName" required autocomplete="off">
                                            <div id="nameTypeahead" class="typeahead-list"></div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="patientAge">Age*</label>
                                            <input type="number" id="patientAge" min="0" max="120" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="patientGender">Gender*</label>
                                            <select id="patientGender" required>
                                                <option value="">Select Gender</option>
                                                <option value="male">Male</option>
                                                <option value="female">Female</option>
                                                <option value="other">Other</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="patientPhone">Phone Number*</label>
                                            <input type="tel" id="patientPhone" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="patientEmail">Email Address</label>
                                            <input type="email" id="patientEmail">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group-full">
                                        <label for="patientAddress">Full Address*</label>
                                        <textarea id="patientAddress" required></textarea>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="patientDisease">Primary Disease/Condition*</label>
                                            <input type="text" id="patientDisease" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="diseaseDuration">Duration of Condition</label>
                                            <input type="text" id="diseaseDuration" placeholder="e.g., 6 months, 2 years">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group-full">
                                        <label for="patientSymptoms">Symptoms*</label>
                                        <textarea id="patientSymptoms" required></textarea>
                                    </div>
                                    
                                    <div class="form-group-full">
                                        <label for="previousTreatment">Previous Treatments (if any)</label>
                                        <textarea id="previousTreatment"></textarea>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="appointmentType">Appointment Type</label>
                                            <select id="appointmentType">
                                                <option value="consultation">Consultation</option>
                                                <option value="followup">Follow-up</option>
                                                <option value="emergency">Emergency</option>
                                            </select>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="consultationFee">Consultation Fee ()*</label>
                                            <input type="number" id="consultationFee" min="0" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="medicineFee">Medicine Fee ()</label>
                                            <input type="number" id="medicineFee" min="0">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="totalFee">Total Amount ()*</label>
                                            <input type="number" id="totalFee" min="0" required>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group-full">
                                        <label for="doctorNotes">Doctor's Notes</label>
                                        <textarea id="doctorNotes"></textarea>
                                    </div>
                                    
                                    <div class="form-group-full">
                                        <label for="prescription">Prescription Details</label>
                                        <textarea id="prescription"></textarea>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="nextVisitDate">Next Visit Date</label>
                                            <input type="date" id="nextVisitDate">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="patientStatus">Patient Status</label>
                                            <select id="patientStatus">
                                                <option value="active">Active</option>
                                                <option value="completed">Treatment Completed</option>
                                                <option value="discontinued">Discontinued</option>
                                                <option value="referred">Referred</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="form-actions">
                                        <button type="submit" class="submit-patient-btn">Save Patient Record</button>
                                        <button type="button" class="reset-btn" onclick="resetPatientForm()">Reset Form</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Patient List Content -->
                        <div id="patientListContent" style="display: none;">
                            <div class="patient-list-container">
                                <div class="table-controls">
                                    <div class="search-box">
                                        <i class="fas fa-search"></i>
                                        <input type="text" id="patientSearch" placeholder="Search patients...">
                                    </div>
                                    <div class="filters">
                                        <select id="filterType" class="filter-select">
                                            <option value="">All Types</option>
                                            <option value="new">New Patients</option>
                                            <option value="regular">Regular Patients</option>
                                        </select>
                                        <select id="filterStatus" class="filter-select">
                                            <option value="">All Status</option>
                                            <option value="active">Active</option>
                                            <option value="completed">Completed</option>
                                            <option value="discontinued">Discontinued</option>
                                        </select>
                                        <select id="sortBy" class="filter-select">
                                            <option value="date-desc">Newest First</option>
                                            <option value="date-asc">Oldest First</option>
                                            <option value="name-asc">Name A-Z</option>
                                            <option value="name-desc">Name Z-A</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div id="patientsTableContainer">
                                    <!-- Patient table will be loaded here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Messages Content -->
                        <div id="messagesContent" style="display: none;">
                            <div class="patient-list-container">
                                <div class="dashboard-header">
                                    <h2>Contact Form Messages</h2>
                                    <div>
                                        <span id="messageCount">0 messages</span>
                                    </div>
                                </div>
                                
                                <div id="messagesContainer">
                                    <!-- Messages will be loaded here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Back to Homepage Link -->
                        <div style="margin-top: 2rem; text-align: center;">
                            <a href="#" onclick="goToHomepage()" style="color: #2a7a5c; text-decoration: none;">
                                <i class="fas fa-arrow-left"></i> Back to main website
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Patient Detail Modal -->
    <div id="patientModal" class="patient-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Patient Details</h3>
                <button class="close-modal" id="closePatientModal">&times;</button>
            </div>
            <div id="patientModalBody">
                <!-- Patient details will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // ==============================================
        // COMPLETE PATIENT MANAGEMENT SYSTEM
        // WITH TYPEAHEAD/AUTOCOMPLETE FOR REGULAR PATIENTS
        // ==============================================
        
        // DOM Elements
        const websiteContent = document.getElementById('websiteContent');
        const adminSection = document.getElementById('adminSection');
        const adminLoginPage = document.getElementById('adminLoginPage');
        const adminDashboard = document.getElementById('adminDashboard');
        const adminLoginForm = document.getElementById('adminLoginForm');
        const logoutBtn = document.getElementById('logoutBtn');
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mainNav = document.getElementById('mainNav');
        const contactForm = document.getElementById('contactForm');
        
        // Typeahead elements
        const patientNameInput = document.getElementById('patientName');
        const nameTypeahead = document.getElementById('nameTypeahead');
        const patientTypeSelect = document.getElementById('patientType');
        
        // Admin credentials
        const ADMIN_USERNAME = "admin";
        const ADMIN_PASSWORD = "admin123";
        
        // Initialize all databases
        function initializeDatabases() {
            // Initialize patient database
            if (!localStorage.getItem('saiPatients')) {
                const samplePatients = [
                    {
                        id: 1,
                        patientId: 'SAI-001',
                        type: 'new',
                        registrationDate: new Date().toISOString().split('T')[0],
                        name: 'Rajesh Kumar',
                        age: 45,
                        gender: 'male',
                        phone: '+91 9876543210',
                        email: 'rajesh@example.com',
                        address: '123 Main Street, Paprola, HP',
                        disease: 'Chronic Arthritis',
                        diseaseDuration: '2 years',
                        symptoms: 'Joint pain, swelling, stiffness in mornings',
                        previousTreatment: 'NSAIDs, physiotherapy',
                        appointmentType: 'consultation',
                        consultationFee: 500,
                        medicineFee: 1500,
                        totalFee: 2000,
                        doctorNotes: 'Patient shows improvement with previous homeopathic treatment',
                        prescription: 'Arnica 30, 2 drops twice daily for 1 month',
                        nextVisitDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                        status: 'active',
                        createdAt: new Date().toISOString(),
                        visitCount: 3,
                        lastVisitDate: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]
                    },
                    {
                        id: 2,
                        patientId: 'SAI-002',
                        type: 'regular',
                        registrationDate: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                        name: 'Priya Sharma',
                        age: 32,
                        gender: 'female',
                        phone: '+91 8765432109',
                        email: 'priya@example.com',
                        address: '456 Market Road, Paprola, HP',
                        disease: 'Allergic Rhinitis',
                        diseaseDuration: '6 months',
                        symptoms: 'Sneezing, runny nose, itchy eyes',
                        previousTreatment: 'Antihistamines',
                        appointmentType: 'followup',
                        consultationFee: 300,
                        medicineFee: 1200,
                        totalFee: 1500,
                        doctorNotes: 'Good response to treatment, symptoms reduced by 70%',
                        prescription: 'Allium Cepa 30, 2 drops twice daily',
                        nextVisitDate: new Date(Date.now() + 45 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                        status: 'active',
                        createdAt: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString(),
                        visitCount: 5,
                        lastVisitDate: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]
                    },
                    {
                        id: 3,
                        patientId: 'SAI-003',
                        type: 'new',
                        registrationDate: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                        name: 'Amit Patel',
                        age: 28,
                        gender: 'male',
                        phone: '+91 7654321098',
                        email: 'amit@example.com',
                        address: '789 Hill View, Paprola, HP',
                        disease: 'Migraine',
                        diseaseDuration: '1 year',
                        symptoms: 'Severe headaches, nausea, sensitivity to light',
                        previousTreatment: 'Painkillers',
                        appointmentType: 'consultation',
                        consultationFee: 500,
                        medicineFee: 1800,
                        totalFee: 2300,
                        doctorNotes: 'First consultation, prescribed constitutional treatment',
                        prescription: 'Belladonna 30, 2 drops when needed',
                        nextVisitDate: new Date(Date.now() + 15 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                        status: 'active',
                        createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
                        visitCount: 1,
                        lastVisitDate: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]
                    },
                    {
                        id: 4,
                        patientId: 'SAI-004',
                        type: 'regular',
                        registrationDate: new Date(Date.now() - 60 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                        name: 'Sunita Reddy',
                        age: 52,
                        gender: 'female',
                        phone: '+91 9988776655',
                        email: 'sunita@example.com',
                        address: '101 Garden Lane, Paprola, HP',
                        disease: 'Diabetes Type 2',
                        diseaseDuration: '3 years',
                        symptoms: 'Fatigue, frequent urination, increased thirst',
                        previousTreatment: 'Metformin',
                        appointmentType: 'followup',
                        consultationFee: 400,
                        medicineFee: 2000,
                        totalFee: 2400,
                        doctorNotes: 'Blood sugar levels improving with homeopathic treatment',
                        prescription: 'Syzygium Jambolanum 30, 2 drops twice daily',
                        nextVisitDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                        status: 'active',
                        createdAt: new Date(Date.now() - 60 * 24 * 60 * 60 * 1000).toISOString(),
                        visitCount: 8,
                        lastVisitDate: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]
                    },
                    {
                        id: 5,
                        patientId: 'SAI-005',
                        type: 'regular',
                        registrationDate: new Date(Date.now() - 90 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                        name: 'Vikram Singh',
                        age: 65,
                        gender: 'male',
                        phone: '+91 8877665544',
                        email: 'vikram@example.com',
                        address: '202 Mountain View, Paprola, HP',
                        disease: 'Hypertension',
                        diseaseDuration: '5 years',
                        symptoms: 'Headaches, dizziness, shortness of breath',
                        previousTreatment: 'Atenolol',
                        appointmentType: 'followup',
                        consultationFee: 400,
                        medicineFee: 1800,
                        totalFee: 2200,
                        doctorNotes: 'Blood pressure stabilizing with combination therapy',
                        prescription: 'Rauwolfia Serpentina 30, 2 drops twice daily',
                        nextVisitDate: new Date(Date.now() + 20 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                        status: 'active',
                        createdAt: new Date(Date.now() - 90 * 24 * 60 * 60 * 1000).toISOString(),
                        visitCount: 12,
                        lastVisitDate: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]
                    }
                ];
                localStorage.setItem('saiPatients', JSON.stringify(samplePatients));
            }
            
            // Initialize message database
            if (!localStorage.getItem('saiMessages')) {
                const sampleMessages = [
                    {
                        id: 1,
                        name: "Rahul Verma",
                        phone: "+91 9876543210",
                        email: "rahul@example.com",
                        appointmentType: "consultation",
                        message: "I need an appointment for chronic migraine treatment. I've heard good things about your clinic.",
                        date: new Date().toISOString(),
                        status: "read"
                    },
                    {
                        id: 2,
                        name: "Sunita Reddy",
                        phone: "+91 8765432109",
                        email: "sunita@example.com",
                        appointmentType: "followup",
                        message: "Following up on my previous treatment for arthritis. The medication has helped significantly.",
                        date: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
                        status: "new"
                    }
                ];
                localStorage.setItem('saiMessages', JSON.stringify(sampleMessages));
            }
            
            // Initialize patient ID counter
            if (!localStorage.getItem('saiPatientIdCounter')) {
                localStorage.setItem('saiPatientIdCounter', '5');
            }
        }
        
        // Generate unique patient ID
        function generatePatientId() {
            let counter = parseInt(localStorage.getItem('saiPatientIdCounter') || '0') + 1;
            localStorage.setItem('saiPatientIdCounter', counter.toString());
            return `SAI-${counter.toString().padStart(3, '0')}`;
        }
        
        // Get all patients
        function getAllPatients() {
            return JSON.parse(localStorage.getItem('saiPatients') || '[]');
        }
        
        // Get regular patients only
        function getRegularPatients() {
            const patients = getAllPatients();
            return patients.filter(patient => patient.type === 'regular');
        }
        
        // Save patients
        function savePatients(patients) {
            localStorage.setItem('saiPatients', JSON.stringify(patients));
        }
        
        // Get all messages
        function getAllMessages() {
            return JSON.parse(localStorage.getItem('saiMessages') || '[]');
        }
        
        // Save messages
        function saveMessages(messages) {
            localStorage.setItem('saiMessages', JSON.stringify(messages));
        }
        
        // ==============================================
        // TYPEAHEAD/AUTOCOMPLETE FUNCTIONALITY
        // ==============================================
        
        // Handle patient type change
        window.handlePatientTypeChange = function() {
            const patientType = patientTypeSelect.value;
            
            // Clear any existing typeahead
            hideTypeahead();
            
            // If switching to regular patient, add event listener for typeahead
            if (patientType === 'regular') {
                patientNameInput.addEventListener('input', handleNameInput);
                patientNameInput.addEventListener('focus', handleNameFocus);
                patientNameInput.setAttribute('placeholder', 'Start typing to see regular patients...');
            } else {
                patientNameInput.removeEventListener('input', handleNameInput);
                patientNameInput.removeEventListener('focus', handleNameFocus);
                patientNameInput.setAttribute('placeholder', '');
            }
        }
        
        // Handle name input for typeahead
        function handleNameInput(e) {
            const query = e.target.value.trim();
            
            // Clear typeahead if query is too short
            if (query.length < 2) {
                hideTypeahead();
                return;
            }
            
            // Show loading indicator
            showTypeahead([{name: 'Searching...', isPlaceholder: true}]);
            
            // Search for matching patients (simulate async with timeout)
            setTimeout(() => {
                const matches = searchPatients(query);
                
                if (matches.length > 0) {
                    showTypeahead(matches);
                } else {
                    showTypeahead([{name: 'No matching patients found', isPlaceholder: true}]);
                }
            }, 300);
        }
        
        // Handle name focus
        function handleNameFocus(e) {
            const query = e.target.value.trim();
            
            // If input is empty or has less than 2 chars, show recent regular patients
            if (query.length < 2) {
                const recentPatients = getRecentRegularPatients(5);
                if (recentPatients.length > 0) {
                    showTypeahead(recentPatients);
                }
            }
        }
        
        // Search patients by name (with fuzzy matching)
        function searchPatients(query) {
            const regularPatients = getRegularPatients();
            const queryLower = query.toLowerCase();
            
            // First, try exact match or starts with
            let matches = regularPatients.filter(patient => {
                const nameLower = patient.name.toLowerCase();
                return nameLower.includes(queryLower);
            });
            
            // Sort by relevance: exact start match first, then contains, then fuzzy
            matches.sort((a, b) => {
                const aName = a.name.toLowerCase();
                const bName = b.name.toLowerCase();
                
                // Exact start match gets highest priority
                if (aName.startsWith(queryLower) && !bName.startsWith(queryLower)) return -1;
                if (!aName.startsWith(queryLower) && bName.startsWith(queryLower)) return 1;
                
                // Then sort by visit count (more visits = more relevant)
                if (a.visitCount > b.visitCount) return -1;
                if (a.visitCount < b.visitCount) return 1;
                
                // Then sort by last visit date (more recent = more relevant)
                const aDate = new Date(a.lastVisitDate || a.registrationDate);
                const bDate = new Date(b.lastVisitDate || b.registrationDate);
                return bDate - aDate;
            });
            
            // Highlight the matching part
            matches = matches.map(patient => {
                return {
                    ...patient,
                    highlightedName: highlightMatch(patient.name, query)
                };
            });
            
            return matches.slice(0, 8); // Return top 8 matches
        }
        
        // Get recent regular patients
        function getRecentRegularPatients(limit = 5) {
            const regularPatients = getRegularPatients();
            
            // Sort by last visit date (most recent first)
            return regularPatients
                .sort((a, b) => {
                    const aDate = new Date(a.lastVisitDate || a.registrationDate);
                    const bDate = new Date(b.lastVisitDate || b.registrationDate);
                    return bDate - aDate;
                })
                .slice(0, limit)
                .map(patient => ({
                    ...patient,
                    highlightedName: patient.name // No highlighting for recent patients
                }));
        }
        
        // Highlight matching text
        function highlightMatch(text, query) {
            const queryLower = query.toLowerCase();
            const textLower = text.toLowerCase();
            const matchIndex = textLower.indexOf(queryLower);
            
            if (matchIndex === -1) return text;
            
            const beforeMatch = text.substring(0, matchIndex);
            const match = text.substring(matchIndex, matchIndex + query.length);
            const afterMatch = text.substring(matchIndex + query.length);
            
            return `${beforeMatch}<span class="autocomplete-highlight">${match}</span>${afterMatch}`;
        }
        
        // Show typeahead results
        function showTypeahead(results) {
            nameTypeahead.innerHTML = '';
            
            results.forEach((patient, index) => {
                const item = document.createElement('div');
                item.className = 'typeahead-item';
                item.setAttribute('data-index', index);
                
                if (patient.isPlaceholder) {
                    item.innerHTML = `<div style="color: #777; text-align: center; padding: 10px;">${patient.name}</div>`;
                    item.style.cursor = 'default';
                } else {
                    item.innerHTML = `
                        <div class="patient-name">${patient.highlightedName}</div>
                        <div class="patient-info">
                            <span class="patient-phone">${patient.phone}</span>  
                            <span class="patient-disease">${patient.disease}</span>
                            <span class="patient-history-badge">${patient.visitCount || 1} visits</span>
                        </div>
                    `;
                    
                    // Add click handler to select patient
                    item.addEventListener('click', () => selectPatientFromTypeahead(patient));
                    
                    // Add keyboard navigation
                    item.addEventListener('mouseenter', () => {
                        setActiveTypeaheadItem(index);
                    });
                }
                
                nameTypeahead.appendChild(item);
            });
            
            nameTypeahead.classList.add('active');
        }
        
        // Hide typeahead
        function hideTypeahead() {
            nameTypeahead.classList.remove('active');
            nameTypeahead.innerHTML = '';
        }
        
        // Set active typeahead item (for keyboard navigation)
        function setActiveTypeaheadItem(index) {
            const items = nameTypeahead.querySelectorAll('.typeahead-item:not([style*="cursor: default"])');
            items.forEach(item => item.classList.remove('active'));
            
            if (items[index]) {
                items[index].classList.add('active');
            }
        }
        
        // Select patient from typeahead
        function selectPatientFromTypeahead(patient) {
            // Fill the form with patient data
            patientNameInput.value = patient.name;
            document.getElementById('patientAge').value = patient.age;
            document.getElementById('patientGender').value = patient.gender;
            document.getElementById('patientPhone').value = patient.phone;
            document.getElementById('patientEmail').value = patient.email || '';
            document.getElementById('patientAddress').value = patient.address;
            document.getElementById('patientDisease').value = patient.disease;
            document.getElementById('diseaseDuration').value = patient.diseaseDuration || '';
            document.getElementById('patientSymptoms').value = patient.symptoms;
            document.getElementById('previousTreatment').value = patient.previousTreatment || '';
            
            // Set current date for registration
            document.getElementById('registrationDate').value = new Date().toISOString().split('T')[0];
            
            // Set appointment type to followup for regular patients
            document.getElementById('appointmentType').value = 'followup';
            
            // Hide typeahead
            hideTypeahead();
            
            // Focus on next field
            document.getElementById('patientAge').focus();
        }
        
        // Handle keyboard navigation in typeahead
        function handleTypeaheadNavigation(e) {
            if (!nameTypeahead.classList.contains('active')) return;
            
            const items = nameTypeahead.querySelectorAll('.typeahead-item:not([style*="cursor: default"])');
            const activeItem = nameTypeahead.querySelector('.typeahead-item.active');
            let activeIndex = activeItem ? parseInt(activeItem.getAttribute('data-index')) : -1;
            
            switch(e.key) {
                case 'ArrowDown':
                    e.preventDefault();
                    activeIndex = (activeIndex + 1) % items.length;
                    setActiveTypeaheadItem(activeIndex);
                    break;
                    
                case 'ArrowUp':
                    e.preventDefault();
                    activeIndex = activeIndex <= 0 ? items.length - 1 : activeIndex - 1;
                    setActiveTypeaheadItem(activeIndex);
                    break;
                    
                case 'Enter':
                    e.preventDefault();
                    if (activeIndex >= 0 && items[activeIndex]) {
                        const patientIndex = parseInt(items[activeIndex].getAttribute('data-index'));
                        const patients = getRegularPatients();
                        const query = patientNameInput.value.trim();
                        const searchResults = searchPatients(query);
                        
                        if (searchResults[patientIndex] && !searchResults[patientIndex].isPlaceholder) {
                            selectPatientFromTypeahead(searchResults[patientIndex]);
                        }
                    }
                    break;
                    
                case 'Escape':
                    hideTypeahead();
                    break;
            }
        }
        
        // Close typeahead when clicking outside
        document.addEventListener('click', (e) => {
            if (!patientNameInput.contains(e.target) && !nameTypeahead.contains(e.target)) {
                hideTypeahead();
            }
        });
        
        // ==============================================
        // PATIENT MANAGEMENT FUNCTIONS
        // ==============================================
        
        // Calculate dashboard statistics
        function calculateDashboardStats() {
            const patients = getAllPatients();
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();
            const lastMonth = currentMonth === 0 ? 11 : currentMonth - 1;
            const lastMonthYear = currentMonth === 0 ? currentYear - 1 : currentYear;
            
            // Filter patients for this month and last month
            const thisMonthPatients = patients.filter(p => {
                const date = new Date(p.registrationDate);
                return date.getMonth() === currentMonth && date.getFullYear() === currentYear;
            });
            
            const lastMonthPatients = patients.filter(p => {
                const date = new Date(p.registrationDate);
                return date.getMonth() === lastMonth && date.getFullYear() === lastMonthYear;
            });
            
            // New patients this month
            const newPatientsThisMonth = thisMonthPatients.filter(p => p.type === 'new').length;
            const newPatientsLastMonth = lastMonthPatients.filter(p => p.type === 'new').length;
            
            // Calculate percentage change
            let newPatientsChange = 0;
            if (newPatientsLastMonth > 0) {
                newPatientsChange = ((newPatientsThisMonth - newPatientsLastMonth) / newPatientsLastMonth) * 100;
            } else if (newPatientsThisMonth > 0) {
                newPatientsChange = 100;
            }
            
            // Total patients
            const totalPatients = patients.length;
            const totalPatientsLastMonth = patients.filter(p => {
                const date = new Date(p.registrationDate);
                return date.getMonth() <= lastMonth && date.getFullYear() <= lastMonthYear;
            }).length;
            
            // Monthly revenue
            const thisMonthRevenue = thisMonthPatients.reduce((sum, p) => sum + (parseFloat(p.totalFee) || 0), 0);
            const lastMonthRevenue = lastMonthPatients.reduce((sum, p) => sum + (parseFloat(p.totalFee) || 0), 0);
            
            let revenueChange = 0;
            if (lastMonthRevenue > 0) {
                revenueChange = ((thisMonthRevenue - lastMonthRevenue) / lastMonthRevenue) * 100;
            } else if (thisMonthRevenue > 0) {
                revenueChange = 100;
            }
            
            // Retention rate (regular patients / total patients seen more than once)
            const regularPatients = patients.filter(p => p.type === 'regular').length;
            const patientsWithFollowup = patients.filter(p => p.nextVisitDate).length;
            const retentionRate = patientsWithFollowup > 0 ? (regularPatients / patientsWithFollowup) * 100 : 0;
            
            return {
                newPatientsThisMonth,
                newPatientsChange,
                totalPatients,
                totalPatientsLastMonth,
                thisMonthRevenue,
                revenueChange,
                retentionRate,
                thisMonthPatients,
                patients
            };
        }
        
        // Update dashboard display
        function updateDashboard() {
            const stats = calculateDashboardStats();
            
            // Update card values
            document.getElementById('newPatientsMonth').textContent = stats.newPatientsThisMonth;
            document.getElementById('totalPatients').textContent = stats.totalPatients;
            document.getElementById('monthlyRevenue').textContent = `${stats.thisMonthRevenue.toLocaleString()}`;
            document.getElementById('retentionRate').textContent = `${stats.retentionRate.toFixed(1)}%`;
            
            // Update patient count in header
            document.getElementById('patientCount').textContent = `${stats.totalPatients} patients`;
            
            // Update changes
            const newPatientsChangeElem = document.getElementById('newPatientsChangeValue');
            newPatientsChangeElem.textContent = `${stats.newPatientsChange >= 0 ? '+' : ''}${stats.newPatientsChange.toFixed(1)}%`;
            newPatientsChangeElem.parentElement.className = `change ${stats.newPatientsChange >= 0 ? 'positive' : 'negative'}`;
            
            const totalPatientsChange = stats.totalPatients - stats.totalPatientsLastMonth;
            document.getElementById('totalPatientsChange').textContent = `${totalPatientsChange >= 0 ? '+' : ''}${totalPatientsChange}`;
            
            const revenueChangeElem = document.getElementById('revenueChangeValue');
            revenueChangeElem.textContent = `${stats.revenueChange >= 0 ? '+' : ''}${stats.revenueChange.toFixed(1)}%`;
            revenueChangeElem.parentElement.className = `change ${stats.revenueChange >= 0 ? 'positive' : 'negative'}`;
            
            // Update charts
            updateCharts(stats);
            
            // Update recent patients
            updateRecentPatients(stats.thisMonthPatients.slice(0, 5));
        }
        
        // Update charts
        function updateCharts(stats) {
            const patients = stats.patients;
            
            // Prepare data for patient growth chart (last 6 months)
            const months = [];
            const newPatientCounts = [];
            const regularPatientCounts = [];
            
            const now = new Date();
            for (let i = 5; i >= 0; i--) {
                const date = new Date(now.getFullYear(), now.getMonth() - i, 1);
                const monthName = date.toLocaleString('default', { month: 'short' });
                months.push(monthName);
                
                const monthPatients = patients.filter(p => {
                    const patientDate = new Date(p.registrationDate);
                    return patientDate.getMonth() === date.getMonth() && 
                           patientDate.getFullYear() === date.getFullYear();
                });
                
                newPatientCounts.push(monthPatients.filter(p => p.type === 'new').length);
                regularPatientCounts.push(monthPatients.filter(p => p.type === 'regular').length);
            }
            
            // Patient Growth Chart
            const growthCtx = document.getElementById('patientGrowthChart').getContext('2d');
            if (window.patientGrowthChart) {
                window.patientGrowthChart.destroy();
            }
            window.patientGrowthChart = new Chart(growthCtx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [
                        {
                            label: 'New Patients',
                            data: newPatientCounts,
                            borderColor: '#2a7a5c',
                            backgroundColor: 'rgba(42, 122, 92, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Regular Patients',
                            data: regularPatientCounts,
                            borderColor: '#ff9800',
                            backgroundColor: 'rgba(255, 152, 0, 0.1)',
                            tension: 0.3,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Patients'
                            }
                        }
                    }
                }
            });
            
            // Disease Distribution Chart
            const diseases = {};
            patients.forEach(patient => {
                if (patient.disease) {
                    diseases[patient.disease] = (diseases[patient.disease] || 0) + 1;
                }
            });
            
            const diseaseLabels = Object.keys(diseases);
            const diseaseData = Object.values(diseases);
            
            const diseaseCtx = document.getElementById('diseaseChart').getContext('2d');
            if (window.diseaseChart) {
                window.diseaseChart.destroy();
            }
            window.diseaseChart = new Chart(diseaseCtx, {
                type: 'doughnut',
                data: {
                    labels: diseaseLabels,
                    datasets: [{
                        data: diseaseData,
                        backgroundColor: [
                            '#2a7a5c',
                            '#4caf50',
                            '#ff9800',
                            '#2196f3',
                            '#9c27b0',
                            '#f44336',
                            '#00bcd4',
                            '#ffeb3b'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                        }
                    }
                }
            });
        }
        
        // Update recent patients list
        function updateRecentPatients(recentPatients) {
            const container = document.getElementById('recentPatientsList');
            
            if (recentPatients.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #777;">No recent patients</p>';
                return;
            }
            
            let html = '<div style="overflow-x: auto;"><table class="patient-table"><thead><tr>';
            html += '<th>ID</th><th>Name</th><th>Age</th><th>Disease</th><th>Type</th><th>Date</th></tr></thead><tbody>';
            
            recentPatients.forEach(patient => {
                const date = new Date(patient.registrationDate);
                const formattedDate = date.toLocaleDateString();
                
                html += `<tr onclick="viewPatient(${patient.id})" style="cursor: pointer;">`;
                html += `<td>${patient.patientId}</td>`;
                html += `<td>${patient.name}</td>`;
                html += `<td>${patient.age}</td>`;
                html += `<td>${patient.disease}</td>`;
                html += `<td><span class="patient-type type-${patient.type}">${patient.type}</span></td>`;
                html += `<td>${formattedDate}</td>`;
                html += `</tr>`;
            });
            
            html += '</tbody></table></div>';
            container.innerHTML = html;
        }
        
        // Show dashboard
        window.showDashboard = function() {
            document.querySelectorAll('.admin-nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('dashboardContent').style.display = 'block';
            document.getElementById('patientFormContent').style.display = 'none';
            document.getElementById('patientListContent').style.display = 'none';
            document.getElementById('messagesContent').style.display = 'none';
            
            updateDashboard();
        }
        
        // Show patient form
        window.showPatientForm = function() {
            document.querySelectorAll('.admin-nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('dashboardContent').style.display = 'none';
            document.getElementById('patientFormContent').style.display = 'block';
            document.getElementById('patientListContent').style.display = 'none';
            document.getElementById('messagesContent').style.display = 'none';
            
            // Set today's date as default
            document.getElementById('registrationDate').value = new Date().toISOString().split('T')[0];
            
            // Initialize typeahead if patient type is regular
            if (patientTypeSelect.value === 'regular') {
                handlePatientTypeChange();
            }
        }
        
        // Show patient list
        window.showPatientList = function() {
            document.querySelectorAll('.admin-nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('dashboardContent').style.display = 'none';
            document.getElementById('patientFormContent').style.display = 'none';
            document.getElementById('patientListContent').style.display = 'block';
            document.getElementById('messagesContent').style.display = 'none';
            
            loadPatientList();
        }
        
        // Show messages
        window.showMessages = function() {
            document.querySelectorAll('.admin-nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('dashboardContent').style.display = 'none';
            document.getElementById('patientFormContent').style.display = 'none';
            document.getElementById('patientListContent').style.display = 'none';
            document.getElementById('messagesContent').style.display = 'block';
            
            loadMessages();
        }
        
        // Load patient list with filtering
        window.loadPatientList = function() {
            const patients = getAllPatients();
            const searchTerm = document.getElementById('patientSearch').value.toLowerCase();
            const filterType = document.getElementById('filterType').value;
            const filterStatus = document.getElementById('filterStatus').value;
            const sortBy = document.getElementById('sortBy').value;
            
            // Filter patients
            let filteredPatients = patients.filter(patient => {
                const matchesSearch = searchTerm === '' || 
                    patient.name.toLowerCase().includes(searchTerm) ||
                    patient.patientId.toLowerCase().includes(searchTerm) ||
                    patient.disease.toLowerCase().includes(searchTerm) ||
                    patient.phone.includes(searchTerm);
                
                const matchesType = !filterType || patient.type === filterType;
                const matchesStatus = !filterStatus || patient.status === filterStatus;
                
                return matchesSearch && matchesType && matchesStatus;
            });
            
            // Sort patients
            filteredPatients.sort((a, b) => {
                switch(sortBy) {
                    case 'date-desc':
                        return new Date(b.registrationDate) - new Date(a.registrationDate);
                    case 'date-asc':
                        return new Date(a.registrationDate) - new Date(b.registrationDate);
                    case 'name-asc':
                        return a.name.localeCompare(b.name);
                    case 'name-desc':
                        return b.name.localeCompare(a.name);
                    default:
                        return 0;
                }
            });
            
            // Update table
            const container = document.getElementById('patientsTableContainer');
            
            if (filteredPatients.length === 0) {
                container.innerHTML = `
                    <div class="no-patients">
                        <i class="fas fa-users" style="font-size: 3rem; margin-bottom: 1rem; color: #ccc;"></i>
                        <h3>No patients found</h3>
                        <p>${searchTerm ? 'Try a different search term' : 'Add your first patient using the "Add Patient" tab'}</p>
                    </div>
                `;
                return;
            }
            
            let html = '<div style="overflow-x: auto;"><table class="patient-table"><thead><tr>';
            html += '<th>ID</th><th>Name</th><th>Age</th><th>Disease</th><th>Phone</th><th>Type</th><th>Status</th><th>Total Fee</th><th>Actions</th></tr></thead><tbody>';
            
            filteredPatients.forEach(patient => {
                const date = new Date(patient.registrationDate);
                const formattedDate = date.toLocaleDateString();
                
                html += `<tr>`;
                html += `<td>${patient.patientId}</td>`;
                html += `<td>${patient.name}</td>`;
                html += `<td>${patient.age}</td>`;
                html += `<td title="${patient.disease}">${patient.disease.length > 20 ? patient.disease.substring(0, 20) + '...' : patient.disease}</td>`;
                html += `<td>${patient.phone}</td>`;
                html += `<td><span class="patient-type type-${patient.type}">${patient.type}</span></td>`;
                html += `<td>${patient.status}</td>`;
                html += `<td>${patient.totalFee}</td>`;
                html += `<td><div class="patient-actions">`;
                html += `<button class="action-btn view-btn" onclick="viewPatient(${patient.id})">View</button>`;
                html += `<button class="action-btn edit-btn" onclick="editPatient(${patient.id})">Edit</button>`;
                html += `<button class="action-btn delete-btn" onclick="deletePatient(${patient.id})">Delete</button>`;
                html += `</div></td>`;
                html += `</tr>`;
            });
            
            html += '</tbody></table></div>';
            container.innerHTML = html;
        }
        
        // View patient details
        window.viewPatient = function(patientId) {
            const patients = getAllPatients();
            const patient = patients.find(p => p.id === patientId);
            
            if (!patient) return;
            
            const date = new Date(patient.registrationDate);
            const formattedDate = date.toLocaleDateString();
            const nextVisitDate = patient.nextVisitDate ? new Date(patient.nextVisitDate).toLocaleDateString() : 'Not scheduled';
            const lastVisitDate = patient.lastVisitDate ? new Date(patient.lastVisitDate).toLocaleDateString() : 'No previous visits';
            
            let html = `
                <div class="modal-details">
                    <div class="detail-section">
                        <h4>Patient Information</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Patient ID:</div>
                                <div class="detail-value">${patient.patientId}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Registration Date:</div>
                                <div class="detail-value">${formattedDate}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Patient Type:</div>
                                <div class="detail-value"><span class="patient-type type-${patient.type}">${patient.type}</span></div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Status:</div>
                                <div class="detail-value">${patient.status}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Total Visits:</div>
                                <div class="detail-value">${patient.visitCount || 1}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Last Visit:</div>
                                <div class="detail-value">${lastVisitDate}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <h4>Personal Details</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Full Name:</div>
                                <div class="detail-value">${patient.name}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Age:</div>
                                <div class="detail-value">${patient.age} years</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Gender:</div>
                                <div class="detail-value">${patient.gender}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Phone:</div>
                                <div class="detail-value">${patient.phone}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Email:</div>
                                <div class="detail-value">${patient.email || 'Not provided'}</div>
                            </div>
                        </div>
                        <div class="detail-item" style="margin-top: 10px;">
                            <div class="detail-label">Address:</div>
                            <div class="detail-value">${patient.address}</div>
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <h4>Medical Information</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Primary Disease:</div>
                                <div class="detail-value">${patient.disease}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Duration:</div>
                                <div class="detail-value">${patient.diseaseDuration || 'Not specified'}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Appointment Type:</div>
                                <div class="detail-value">${patient.appointmentType}</div>
                            </div>
                        </div>
                        <div class="detail-item" style="margin-top: 10px;">
                            <div class="detail-label">Symptoms:</div>
                            <div class="detail-value">${patient.symptoms}</div>
                        </div>
                        <div class="detail-item" style="margin-top: 10px;">
                            <div class="detail-label">Previous Treatment:</div>
                            <div class="detail-value">${patient.previousTreatment || 'None reported'}</div>
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <h4>Treatment Details</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Consultation Fee:</div>
                                <div class="detail-value">${patient.consultationFee}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Medicine Fee:</div>
                                <div class="detail-value">${patient.medicineFee || '0'}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Total Fee:</div>
                                <div class="detail-value">${patient.totalFee}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Next Visit:</div>
                                <div class="detail-value">${nextVisitDate}</div>
                            </div>
                        </div>
                        <div class="detail-item" style="margin-top: 10px;">
                            <div class="detail-label">Doctor's Notes:</div>
                            <div class="detail-value">${patient.doctorNotes || 'No notes'}</div>
                        </div>
                        <div class="detail-item" style="margin-top: 10px;">
                            <div class="detail-label">Prescription:</div>
                            <div class="detail-value">${patient.prescription || 'No prescription'}</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('patientModalBody').innerHTML = html;
            document.getElementById('patientModal').style.display = 'flex';
        }
        
        // Edit patient
        window.editPatient = function(patientId) {
            const patients = getAllPatients();
            const patient = patients.find(p => p.id === patientId);
            
            if (!patient) return;
            
            // Set patient type first
            patientTypeSelect.value = patient.type;
            handlePatientTypeChange();
            
            // Load patient data into form
            document.getElementById('patientType').value = patient.type;
            document.getElementById('registrationDate').value = patient.registrationDate;
            document.getElementById('patientName').value = patient.name;
            document.getElementById('patientAge').value = patient.age;
            document.getElementById('patientGender').value = patient.gender;
            document.getElementById('patientPhone').value = patient.phone;
            document.getElementById('patientEmail').value = patient.email || '';
            document.getElementById('patientAddress').value = patient.address;
            document.getElementById('patientDisease').value = patient.disease;
            document.getElementById('diseaseDuration').value = patient.diseaseDuration || '';
            document.getElementById('patientSymptoms').value = patient.symptoms;
            document.getElementById('previousTreatment').value = patient.previousTreatment || '';
            document.getElementById('appointmentType').value = patient.appointmentType;
            document.getElementById('consultationFee').value = patient.consultationFee;
            document.getElementById('medicineFee').value = patient.medicineFee || '';
            document.getElementById('totalFee').value = patient.totalFee;
            document.getElementById('doctorNotes').value = patient.doctorNotes || '';
            document.getElementById('prescription').value = patient.prescription || '';
            document.getElementById('nextVisitDate').value = patient.nextVisitDate || '';
            document.getElementById('patientStatus').value = patient.status;
            
            // Store editing patient ID
            document.getElementById('patientForm').dataset.editingId = patientId;
            
            // Change form to update mode
            const form = document.getElementById('patientForm');
            const submitBtn = form.querySelector('.submit-patient-btn');
            submitBtn.textContent = 'Update Patient Record';
            
            // Switch to patient form tab
            showPatientForm();
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Update patient
        function updatePatient(patientId) {
            // Get form values
            const patientData = {
                id: patientId,
                patientId: document.getElementById('patientForm').dataset.editingId || generatePatientId(),
                type: document.getElementById('patientType').value,
                registrationDate: document.getElementById('registrationDate').value,
                name: document.getElementById('patientName').value,
                age: parseInt(document.getElementById('patientAge').value),
                gender: document.getElementById('patientGender').value,
                phone: document.getElementById('patientPhone').value,
                email: document.getElementById('patientEmail').value,
                address: document.getElementById('patientAddress').value,
                disease: document.getElementById('patientDisease').value,
                diseaseDuration: document.getElementById('diseaseDuration').value,
                symptoms: document.getElementById('patientSymptoms').value,
                previousTreatment: document.getElementById('previousTreatment').value,
                appointmentType: document.getElementById('appointmentType').value,
                consultationFee: parseFloat(document.getElementById('consultationFee').value),
                medicineFee: parseFloat(document.getElementById('medicineFee').value) || 0,
                totalFee: parseFloat(document.getElementById('totalFee').value),
                doctorNotes: document.getElementById('doctorNotes').value,
                prescription: document.getElementById('prescription').value,
                nextVisitDate: document.getElementById('nextVisitDate').value,
                status: document.getElementById('patientStatus').value,
                updatedAt: new Date().toISOString(),
                lastVisitDate: new Date().toISOString().split('T')[0]
            };
            
            // Get existing patient to preserve visit count
            const existingPatients = getAllPatients();
            const existingPatient = existingPatients.find(p => p.id === patientId);
            if (existingPatient) {
                patientData.visitCount = (existingPatient.visitCount || 1) + 1;
                patientData.createdAt = existingPatient.createdAt;
            } else {
                patientData.visitCount = 1;
                patientData.createdAt = new Date().toISOString();
            }
            
            // Calculate total fee if not provided
            if (!patientData.totalFee || isNaN(patientData.totalFee)) {
                patientData.totalFee = patientData.consultationFee + patientData.medicineFee;
                document.getElementById('totalFee').value = patientData.totalFee;
            }
            
            // Update patient in database
            let patients = getAllPatients();
            patients = patients.map(p => p.id === patientId ? { ...p, ...patientData } : p);
            savePatients(patients);
            
            // Reset form
            resetPatientForm();
            
            // Show success message
            alert(`Patient ${patientData.name} updated successfully!`);
            
            // Update dashboard and switch to patient list
            updateDashboard();
            showPatientList();
        }
        
        // Delete patient
        window.deletePatient = function(patientId) {
            if (confirm('Are you sure you want to delete this patient record? This action cannot be undone.')) {
                let patients = getAllPatients();
                patients = patients.filter(p => p.id !== patientId);
                savePatients(patients);
                
                // Update UI
                loadPatientList();
                updateDashboard();
                alert('Patient record deleted successfully.');
            }
        }
        
        // Reset patient form
        window.resetPatientForm = function() {
            if (confirm('Are you sure you want to reset the form? All entered data will be lost.')) {
                document.getElementById('patientForm').reset();
                document.getElementById('registrationDate').value = new Date().toISOString().split('T')[0];
                
                // Reset submit button to original state
                const submitBtn = document.querySelector('.submit-patient-btn');
                submitBtn.textContent = 'Save Patient Record';
                submitBtn.onclick = null;
                
                // Remove editing data
                delete document.getElementById('patientForm').dataset.editingId;
                
                // Reset patient type and typeahead
                patientTypeSelect.value = '';
                hideTypeahead();
                patientNameInput.removeEventListener('input', handleNameInput);
                patientNameInput.removeEventListener('focus', handleNameFocus);
                patientNameInput.setAttribute('placeholder', '');
            }
        }
        
        // Load messages
        function loadMessages() {
            const messages = getAllMessages();
            
            // Update message count
            const newMessages = messages.filter(msg => msg.status === 'new').length;
            const totalMessages = messages.length;
            document.getElementById('messageCount').textContent = `${totalMessages} messages (${newMessages} new)`;
            
            // Update message badge
            const messageBadge = document.getElementById('messageBadge');
            if (newMessages > 0) {
                messageBadge.textContent = newMessages;
                messageBadge.style.display = 'inline-flex';
            } else {
                messageBadge.style.display = 'none';
            }
            
            // Clear messages container
            const container = document.getElementById('messagesContainer');
            container.innerHTML = '';
            
            if (messages.length === 0) {
                container.innerHTML = `
                    <div class="no-patients">
                        <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 1rem; color: #ccc;"></i>
                        <h3>No messages yet</h3>
                        <p>Contact form messages will appear here once submitted.</p>
                    </div>
                `;
                return;
            }
            
            // Sort messages by date (newest first)
            const sortedMessages = [...messages].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // Create messages table
            const table = document.createElement('table');
            table.className = 'patient-table';
            table.style.width = '100%';
            
            // Create table header
            table.innerHTML = `
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Phone</th>
                        <th>Type</th>
                        <th>Date</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="messagesTableBody">
                </tbody>
            `;
            
            container.appendChild(table);
            const tableBody = document.getElementById('messagesTableBody');
            
            // Add each message as a table row
            sortedMessages.forEach(message => {
                const row = document.createElement('tr');
                const date = new Date(message.date);
                const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                
                row.innerHTML = `
                    <td>${message.id}</td>
                    <td>${message.name}</td>
                    <td>${message.phone}</td>
                    <td>${message.appointmentType}</td>
                    <td>${formattedDate}</td>
                    <td><span class="message-status ${message.status === 'new' ? 'status-new' : 'status-read'}">${message.status}</span></td>
                    <td>
                        <div class="patient-actions">
                            <button class="action-btn view-btn" onclick="viewMessage(${message.id})">View</button>
                            <button class="action-btn delete-btn" onclick="deleteMessage(${message.id})">Delete</button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // View message details
        window.viewMessage = function(messageId) {
            const messages = getAllMessages();
            const message = messages.find(msg => msg.id === messageId);
            
            if (!message) return;
            
            const date = new Date(message.date);
            const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
            
            // Mark as read
            if (message.status === 'new') {
                message.status = 'read';
                saveMessages(messages);
                loadMessages();
            }
            
            // Show message in modal
            document.getElementById('patientModalBody').innerHTML = `
                <div class="modal-details">
                    <div class="detail-section">
                        <h4>Message Details</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">Message ID:</div>
                                <div class="detail-value">${message.id}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Date:</div>
                                <div class="detail-value">${formattedDate}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Name:</div>
                                <div class="detail-value">${message.name}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Phone:</div>
                                <div class="detail-value">${message.phone}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Email:</div>
                                <div class="detail-value">${message.email || 'Not provided'}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Appointment Type:</div>
                                <div class="detail-value">${message.appointmentType}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Status:</div>
                                <div class="detail-value"><span class="message-status ${message.status === 'new' ? 'status-new' : 'status-read'}">${message.status}</span></div>
                            </div>
                        </div>
                        <div class="detail-item" style="margin-top: 10px;">
                            <div class="detail-label">Message:</div>
                            <div class="detail-value">${message.message}</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('patientModal').style.display = 'flex';
        }
        
        // Delete message
        window.deleteMessage = function(messageId) {
            if (confirm('Are you sure you want to delete this message?')) {
                let messages = getAllMessages();
                messages = messages.filter(msg => msg.id !== messageId);
                saveMessages(messages);
                loadMessages();
                alert('Message deleted successfully.');
            }
        }
        
        // ==============================================
        // WEBSITE FUNCTIONALITY
        // ==============================================
        
        // Function to go back to homepage
        window.goToHomepage = function() {
            showWebsite();
            window.history.pushState({}, '', '/');
            return false;
        };
        
        // Check current route on page load
        function checkRoute() {
            const path = window.location.pathname;
            const fullPath = window.location.href;
            
            // Check if we're on the /admin route
            if (path === '/admin' || fullPath.includes('/admin') || window.location.hash === '#admin') {
                showAdminSection();
            } else {
                showWebsite();
            }
        }
        
        // Show main website
        function showWebsite() {
            websiteContent.style.display = 'block';
            adminSection.style.display = 'none';
            window.history.pushState({}, '', '/');
            
            // Update active nav link
            updateActiveNavLink();
        }
        
        // Show admin section
        function showAdminSection() {
            websiteContent.style.display = 'none';
            adminSection.style.display = 'block';
            
            // Check if user is already logged in
            const isLoggedIn = localStorage.getItem('adminLoggedIn') === 'true';
            if (isLoggedIn) {
                showAdminDashboard();
            } else {
                showAdminLogin();
            }
            
            // Update URL to show /admin route
            window.history.pushState({}, '', '/admin');
        }
        
        // Show admin login page
        function showAdminLogin() {
            adminLoginPage.style.display = 'block';
            adminDashboard.style.display = 'none';
        }
        
        // Show admin dashboard
        function showAdminDashboard() {
            adminLoginPage.style.display = 'none';
            adminDashboard.style.display = 'block';
            updateDashboard();
        }
        
        // ==============================================
        // ADMIN LOGIN SYSTEM
        // ==============================================
        adminLoginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('adminUsername').value.trim();
            const password = document.getElementById('adminPassword').value;
            
            // DIRECT STRING COMPARISON - GUARANTEED TO WORK
            if (username === "admin" && password === "admin123") {
                localStorage.setItem('adminLoggedIn', 'true');
                showAdminDashboard();
                updateDashboard();
            } else {
                alert('Invalid username or password.\n\nPlease use:\nUsername: admin\nPassword: admin123\n\nNote: Both are case-sensitive.');
                document.getElementById('adminPassword').value = '';
                document.getElementById('adminUsername').focus();
            }
        });
        
        // Logout button
        logoutBtn.addEventListener('click', () => {
            localStorage.setItem('adminLoggedIn', 'false');
            showAdminLogin();
            document.getElementById('adminLoginForm').reset();
        });
        
        // Handle browser back/forward buttons
        window.addEventListener('popstate', checkRoute);
        
        // Form submission on main website
        if (contactForm) {
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Get form values
                const name = document.getElementById('name').value;
                const phone = document.getElementById('phone').value;
                const email = document.getElementById('email').value;
                const appointmentType = document.getElementById('appointment').value;
                const message = document.getElementById('message').value;
                
                // Get existing messages
                let messages = getAllMessages();
                
                // Create new message object
                const newMessage = {
                    id: messages.length > 0 ? Math.max(...messages.map(m => m.id)) + 1 : 1,
                    name: name,
                    phone: phone,
                    email: email,
                    appointmentType: appointmentType,
                    message: message,
                    date: new Date().toISOString(),
                    status: 'new'
                };
                
                // Add to messages array
                messages.push(newMessage);
                
                // Save to localStorage
                saveMessages(messages);
                
                // Show success message
                alert(`Thank you ${name}! Your message has been sent. We will contact you at ${phone} shortly.`);
                
                // Reset form
                contactForm.reset();
            });
        }
        
        // Mobile menu toggle
        if (mobileMenuBtn && mainNav) {
            mobileMenuBtn.addEventListener('click', () => {
                mainNav.classList.toggle('active');
                mobileMenuBtn.innerHTML = mainNav.classList.contains('active') 
                    ? '<i class="fas fa-times"></i>' 
                    : '<i class="fas fa-bars"></i>';
            });
        }
        
        // Smooth scrolling for navigation links
        document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                    
                    // Update active nav link
                    document.querySelectorAll('nav a').forEach(link => {
                        link.classList.remove('active');
                    });
                    this.classList.add('active');
                }
                
                // Close mobile menu if open
                if (mainNav && mainNav.classList.contains('active')) {
                    mainNav.classList.remove('active');
                    mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';
                }
            });
        });
        
        // Function to update active nav link based on scroll
        function updateActiveNavLink() {
            if (websiteContent.style.display === 'none') return;
            
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('nav a');
            
            let current = '';
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                
                if (window.scrollY >= (sectionTop - 100)) {
                    current = section.getAttribute('id');
                }
            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        }
        
        // Highlight active navigation based on scroll position
        window.addEventListener('scroll', updateActiveNavLink);
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize databases
            initializeDatabases();
            
            // Check route
            checkRoute();
            
            // Setup patient form
            const patientForm = document.getElementById('patientForm');
            if (patientForm) {
                patientForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Get form values
                    const patientData = {
                        id: Date.now(),
                        patientId: generatePatientId(),
                        type: document.getElementById('patientType').value,
                        registrationDate: document.getElementById('registrationDate').value,
                        name: document.getElementById('patientName').value,
                        age: parseInt(document.getElementById('patientAge').value),
                        gender: document.getElementById('patientGender').value,
                        phone: document.getElementById('patientPhone').value,
                        email: document.getElementById('patientEmail').value,
                        address: document.getElementById('patientAddress').value,
                        disease: document.getElementById('patientDisease').value,
                        diseaseDuration: document.getElementById('diseaseDuration').value,
                        symptoms: document.getElementById('patientSymptoms').value,
                        previousTreatment: document.getElementById('previousTreatment').value,
                        appointmentType: document.getElementById('appointmentType').value,
                        consultationFee: parseFloat(document.getElementById('consultationFee').value),
                        medicineFee: parseFloat(document.getElementById('medicineFee').value) || 0,
                        totalFee: parseFloat(document.getElementById('totalFee').value),
                        doctorNotes: document.getElementById('doctorNotes').value,
                        prescription: document.getElementById('prescription').value,
                        nextVisitDate: document.getElementById('nextVisitDate').value,
                        status: document.getElementById('patientStatus').value,
                        createdAt: new Date().toISOString(),
                        visitCount: 1,
                        lastVisitDate: new Date().toISOString().split('T')[0]
                    };
                    
                    // Calculate total fee if not provided
                    if (!patientData.totalFee || isNaN(patientData.totalFee)) {
                        patientData.totalFee = patientData.consultationFee + patientData.medicineFee;
                        document.getElementById('totalFee').value = patientData.totalFee;
                    }
                    
                    // Save patient
                    let patients = getAllPatients();
                    patients.push(patientData);
                    savePatients(patients);
                    
                    // Reset form
                    resetPatientForm();
                    
                    // Show success message
                    alert(`Patient ${patientData.name} added successfully with ID: ${patientData.patientId}`);
                    
                    // Update dashboard and switch to patient list
                    updateDashboard();
                    showPatientList();
                });
            }
            
            // Setup event listeners for patient list filters
            document.getElementById('patientSearch')?.addEventListener('input', loadPatientList);
            document.getElementById('filterType')?.addEventListener('change', loadPatientList);
            document.getElementById('filterStatus')?.addEventListener('change', loadPatientList);
            document.getElementById('sortBy')?.addEventListener('change', loadPatientList);
            
            // Setup auto-calculation of total fee
            const consultationFeeInput = document.getElementById('consultationFee');
            const medicineFeeInput = document.getElementById('medicineFee');
            const totalFeeInput = document.getElementById('totalFee');
            
            if (consultationFeeInput && medicineFeeInput && totalFeeInput) {
                function calculateTotalFee() {
                    const consultationFee = parseFloat(consultationFeeInput.value) || 0;
                    const medicineFee = parseFloat(medicineFeeInput.value) || 0;
                    totalFeeInput.value = consultationFee + medicineFee;
                }
                
                consultationFeeInput.addEventListener('input', calculateTotalFee);
                medicineFeeInput.addEventListener('input', calculateTotalFee);
            }
            
            // Add keyboard navigation for typeahead
            patientNameInput?.addEventListener('keydown', handleTypeaheadNavigation);
            
            // Close patient modal
            document.getElementById('closePatientModal')?.addEventListener('click', function() {
                document.getElementById('patientModal').style.display = 'none';
            });
            
            // Close modal when clicking outside
            document.getElementById('patientModal')?.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.style.display = 'none';
                }
            });
            
            // Add a hidden way to access admin for testing
            // Double-click logo to go to admin
            const logo = document.querySelector('.logo');
            if (logo) {
                logo.addEventListener('dblclick', function() {
                    showAdminSection();
                    window.history.pushState({}, '', '/admin');
                });
            }
        });
        
        // Handle direct access to /admin
        // If someone manually types /admin in URL, show admin section
        window.addEventListener('load', checkRoute);
    </script>
</body>
</html>